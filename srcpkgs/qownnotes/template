# Template file for 'qownnotes'
pkgname=qownnotes
version=26.1.10
revision=1
build_style=cmake
configure_args="-DBUILD_WITH_SYSTEM_BOTAN=ON
	-DQON_QT6_BUILD=ON
	-DBUILD_WITH_LIBGIT2=$(vopt_if libgit2 ON OFF)
	-DCMAKE_POLICY_VERSION_MINIMUM=3.5"
hostmakedepends="pkg-config qt6-base qt6-tools"
makedepends="botan3-devel qt6-base-devel qt6-declarative-devel
 aspell-devel qt6-qt5compat-devel qt6-svg-devel qt6-websockets-devel
 $(vopt_if libgit2 libgit2-devel)"
depends="qt6-plugin-sqlite"
short_desc="Plain-text file markdown note taking with Nextcloud/ownCloud integration"
maintainer="Kevin Figueroa <kfdevart@disroot.org>"
license="GPL-2.0-or-later"
homepage="https://github.com/pbek/QOwnNotes"
changelog="https://raw.githubusercontent.com/pbek/QOwnNotes/refs/tags/v${version}/CHANGELOG.md"
distfiles="${homepage}/releases/download/v${version}/qownnotes-${version}.tar.xz"
checksum=@6d646f3811c908695de544b86f0b94ff7554e875409b7520a79114463e5c314b
repository=cereus-extra

build_options="libgit2"
desc_option_libgit2="Enable libgit2 support"
build_options_default="libgit2"

post_install() {
	rename QOwnNotes qownnotes "${DESTDIR}/usr/bin/QOwnNotes"
	vsed -i 's|Exec=QOwnNotes|Exec=qownnotes|g' PBE.QOwnNotes.desktop
	ln -frs ${DESTDIR}/usr/bin/qownnotes ${DESTDIR}/usr/bin/QOwnNotes
}
